---
phase: 14-code-quality-tools
plan: 01
type: execute
---

<objective>
Add linting for backend Go code and code formatting for frontend TypeScript.

Purpose: Enforce code quality standards and consistent formatting across the codebase to improve maintainability and reduce style-related code review friction.
Output: golangci-lint configured for backend with strict ruleset, Prettier configured for frontend with automatic formatting.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/STACK.md
@.planning/codebase/CONVENTIONS.md
@.planning/phases/12-testing-infrastructure/12-01-SUMMARY.md
@backend/Makefile
@frontend/package.json
@frontend/eslint.config.js

**Tech stack available:** Go 1.25.3, React 19, TypeScript 5.9, Vite 7, ESLint 9 (flat config), Vitest 4
**Established patterns:** Makefile commands for backend tasks, npm scripts for frontend tasks, GitHub Actions CI for testing
**Constraining decisions:**
- Phase 12: Test coverage thresholds at 60% baseline, make targets for test-coverage and test-race
- Phase 13: Documentation complete - linting violations should not break existing documented patterns

**Current state:**
- Backend: No linting configured, tests pass cleanly
- Frontend: ESLint 9 flat config exists (modern), no Prettier configured
- CI: .github/workflows/test.yml runs tests but no linting/formatting checks
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure golangci-lint for backend</name>
  <files>.golangci.yml, backend/Makefile</files>
  <action>Create `.golangci.yml` in repository root with strict but pragmatic configuration:

**Linters to enable:**
- **go vet** (included by default) - Static analysis
- **errcheck** - Check for unchecked errors
- **gosimple** - Simplify code suggestions
- **govet** - Official Go static analyzer
- **ineffassign** - Detect ineffectual assignments
- **staticcheck** - Advanced static analysis
- **typecheck** - Type checking errors
- **unused** - Unused constants, variables, functions
- **misspell** - Spelling mistakes
- **revive** - Fast, configurable linter (replaces golint)
- **gofmt** - Format checking
- **goimports** - Import formatting

**Configuration approach:**
```yaml
run:
  timeout: 5m
  tests: true  # Lint test files too

linters:
  enable:
    - errcheck
    - gosimple
    - govet
    - ineffassign
    - staticcheck
    - typecheck
    - unused
    - misspell
    - revive
    - gofmt
    - goimports

linters-settings:
  errcheck:
    check-blank: true  # Check _= assignments
  revive:
    rules:
      - name: var-naming
      - name: error-return
      - name: error-strings
      - name: error-naming
  goimports:
    local-prefixes: github.com/nathanael/organizr

issues:
  exclude-use-default: false
  max-issues-per-linter: 0
  max-same-issues: 0
```

**Add to backend/Makefile:**
```makefile
.PHONY: lint

lint:
	golangci-lint run ./...
```

**What to avoid:** Don't enable overly opinionated linters like `lll` (line length), `gomnd` (magic numbers), `funlen` (function length) - focus on correctness and clarity over style preferences.</action>
  <verify>cd backend && golangci-lint run ./... completes (may find issues to fix, that's expected)</verify>
  <done>golangci-lint configured, Makefile has lint target, linter runs successfully</done>
</task>

<task type="auto">
  <name>Task 2: Configure Prettier for frontend and integrate with ESLint</name>
  <files>frontend/package.json, frontend/.prettierrc.json, frontend/.prettierignore, frontend/eslint.config.js</files>
  <action>Add Prettier for consistent code formatting:

**1. Install Prettier:**
```bash
cd frontend
npm install --save-dev prettier eslint-config-prettier
```

**2. Create `.prettierrc.json`:**
```json
{
  "semi": false,
  "singleQuote": true,
  "trailingComma": "es5",
  "tabWidth": 2,
  "printWidth": 100,
  "arrowParens": "always"
}
```

**3. Create `.prettierignore`:**
```
dist
coverage
node_modules
*.html
```

**4. Update `eslint.config.js`:**
Add eslint-config-prettier to disable ESLint rules that conflict with Prettier:
```javascript
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import prettierConfig from 'eslint-config-prettier'

export default [
  { ignores: ['dist'] },
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      ...tseslint.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
  prettierConfig, // Must be last to override other formatting rules
]
```

**5. Add npm scripts to `package.json`:**
```json
"scripts": {
  ...existing scripts,
  "format": "prettier --write \"src/**/*.{ts,tsx,css}\"",
  "format:check": "prettier --check \"src/**/*.{ts,tsx,css}\""
}
```

**What to avoid:** Don't install eslint-plugin-prettier (runs Prettier through ESLint) - run Prettier directly for better performance. Don't override Prettier defaults excessively - stick to minimal config.</action>
  <verify>cd frontend && npm run format:check passes (or shows files to format), npm run format succeeds</verify>
  <done>Prettier installed and configured, ESLint conflicts disabled, format and format:check scripts available</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd backend && golangci-lint run ./...` runs successfully
- [ ] `cd frontend && npm run format:check` runs successfully
- [ ] Backend Makefile has `make lint` target
- [ ] Frontend package.json has format and format:check scripts
- [ ] No existing code breaks due to new linting rules (or violations fixed)
</verification>

<success_criteria>

- All tasks completed
- golangci-lint configured with strict but pragmatic ruleset
- Prettier configured with reasonable defaults
- Both linting and formatting can be run via make/npm commands
- Existing code passes linting and formatting checks (or violations are fixed)
</success_criteria>

<output>
After completion, create `.planning/phases/14-code-quality-tools/14-01-SUMMARY.md`:

---
phase: 14-code-quality-tools
plan: 01
subsystem: code-quality
tags: [linting, formatting, golangci-lint, prettier, code-quality]

# Dependency graph
requires:
  - phase: 13-developer-documentation
    provides: Complete documentation, troubleshooting guide
provides:
  - golangci-lint configuration for backend Go code
  - Prettier configuration for frontend TypeScript code
  - Lint and format commands via Makefile and npm scripts
affects: [14-02-pre-commit-ci, 15-refactoring-opportunities]

# Tech tracking
tech-stack:
  added: [golangci-lint, prettier, eslint-config-prettier]
  patterns: [code-linting, code-formatting, quality-gates]

key-files:
  created:
    - .golangci.yml
    - frontend/.prettierrc.json
    - frontend/.prettierignore
  modified:
    - backend/Makefile
    - frontend/package.json
    - frontend/eslint.config.js

key-decisions:
  - "golangci-lint with pragmatic ruleset: errcheck, staticcheck, revive, goimports (no style-only linters)"
  - "Prettier for TypeScript formatting (separate from ESLint for performance)"
  - "eslint-config-prettier to disable conflicting rules"

---

# Phase 14 Plan 1: Backend Linting and Frontend Formatting Summary

**golangci-lint and Prettier configured with pragmatic rules for backend Go and frontend TypeScript**

## Accomplishments

- Configured golangci-lint for backend with strict correctness linters (errcheck, staticcheck, revive)
- Added Prettier to frontend for consistent code formatting
- Integrated Prettier with ESLint via eslint-config-prettier
- Created lint and format commands for both backend and frontend
- Fixed any existing linting/formatting violations

## Files Created/Modified

- `.golangci.yml` - golangci-lint configuration with pragmatic ruleset
- `backend/Makefile` - Added lint target
- `frontend/.prettierrc.json` - Prettier configuration with reasonable defaults
- `frontend/.prettierignore` - Ignore dist, coverage, node_modules
- `frontend/package.json` - Added format and format:check scripts
- `frontend/eslint.config.js` - Integrated eslint-config-prettier

## Decisions Made

- **golangci-lint over alternatives**: Standard tool for Go projects, fast, comprehensive
- **Pragmatic linter selection**: Focus on correctness (errcheck, staticcheck) over style (no line length, magic numbers)
- **Prettier separate from ESLint**: Better performance, clearer separation of concerns
- **Minimal Prettier config**: Override only essential defaults (single quotes, no semicolons, 100 char width)

## Issues Encountered

None

## Next Step

Ready for 14-02-PLAN.md - Pre-commit hooks and CI enforcement
</output>
