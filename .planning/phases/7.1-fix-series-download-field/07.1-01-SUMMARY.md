---
phase: 7.1-fix-series-download-field
plan: 01
subsystem: frontend
tags: [series, download, folder-organization, bugfix]

# Dependency graph
requires:
  - phase: 07-mam-series-detection
    provides: Structured series data with SeriesInfo[] type
provides:
  - Download requests send series names only (not names with numbers)
  - Correct folder structure during file organization
affects: [08-batch-operations, file-organization]

# Tech tracking
tech-stack:
  added: []
  patterns: []

key-files:
  created: []
  modified:
    - frontend/src/components/search/SearchResultListItem.tsx
    - frontend/src/components/search/SearchResultCard.tsx

key-decisions:
  - "Keep display logic unchanged (still shows series with numbers in UI)"
  - "Change only download handler logic to extract series names"

patterns-established: []

issues-created: []

# Metrics
duration: 3min
completed: 2026-01-08
---

# Phase 7.1 Plan 1: Fix Series Download Field Summary

**Download requests now send series names only, fixing folder organization to create 'Discworld/' instead of 'Discworld #1/'**

## Performance

- **Duration:** 3 min
- **Started:** 2026-01-07T22:18:21Z
- **Completed:** 2026-01-08T00:49:19Z
- **Tasks:** 2
- **Files modified:** 2

## Accomplishments

- Fixed SearchResultListItem.tsx download handler to extract series names only
- Fixed SearchResultCard.tsx download handler to extract series names only
- Download requests now send "Discworld" instead of "Discworld #1"
- Ensures correct folder structure during file organization
- Display logic preserved (UI still shows series with numbers)

## Task Commits

Each task was committed atomically:

1. **Task 1: Fix series field in SearchResultListItem download handler** - `dc9e5d1` (fix)
2. **Task 2: Fix series field in SearchResultCard download handler** - `adc8e8a` (fix)

## Files Modified

- `frontend/src/components/search/SearchResultListItem.tsx` - Changed line 29 from `.map(s => \`${s.name} #${s.number}\`)` to `.map(s => s.name)`
- `frontend/src/components/search/SearchResultCard.tsx` - Changed line 27 from `.map(s => \`${s.name} #${s.number}\`)` to `.map(s => s.name)`

## Decisions Made

- **Preserve display logic**: Display code (lines 211 in ListItem, 58 in Card) still shows series with numbers (e.g., "Series: Discworld #1") for user visibility
- **Change download logic only**: Download handlers now extract series names only for correct folder organization

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None - straightforward string mapping change.

## Next Phase Readiness

- ✅ Download requests send series names only
- ✅ Folder organization will create correct structures (e.g., "Discworld/" not "Discworld #1/")
- ✅ Display logic unchanged (users still see series numbers in UI)
- ✅ Ready for Phase 8 (Batch Operations) without compounding the issue

---
*Phase: 7.1-fix-series-download-field*
*Completed: 2026-01-08*
